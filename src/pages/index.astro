---
import LoginLayout from "../layouts/LoginLayout.astro";

import LoginWindow from "../components/LoginWindow.astro";
import WelcomePromptWindowdow from "../components/WelcomePromptWindow";

import ShaderWrapper from "../components/ShaderWrapper";

import GlitchedBackground from "../components/GlitchedBackground.astro";
---

<LoginLayout title="【ｓｅｇｍｅｎｔａｔｉｏｎｆａｕｌｔ】">
  <!-- Main container -->
  <div class="bgGradient">
    <div class="relative">
      <!-- Windows Container -->
      <div class="flex justify-center">
        <div class="relative left-[100vh]" id="welcomePromptWindow">
          <WelcomePromptWindowdow client:load />
        </div>

        <div class="relative" id="loginWindow">
          <LoginWindow />
        </div>
      </div>

      <!-- Background Shader Container -->
      <div class="relative" id="shadderContainer">
        <ShaderWrapper client:only="react" />
      </div>

      <!-- Glitch at bottom container -->
      <div class="fixed bottom-0" id="glitchedBottom">
        <GlitchedBackground />
      </div>
    </div>
  </div>

  <script>
    import { isLoggedin } from "../store";

    // Attach the event listener to the Login button
    document.getElementById("loginButton").addEventListener("click", logUserIn);

    // Set the store to true when the button is clicked
    function logUserIn() {
      isLoggedin.set(true);
      // Once user is logged in, hides the other components
      document.getElementById("loginWindow").style.display = "none";
      document.getElementById("glitchedBottom").style.display = "none";
    }
  </script>
</LoginLayout>
